# 📊 부하 테스트 대상 API 선정 문서

## 📌 들어가면서

부하 테스트는 서비스의 안정성과 성능을 사전에 검증하는 필수적인 과정입니다. 특히 대규모 동시 접속이 예상되는 티켓팅 서비스에서는 더욱 중요합니다. 이 문서에서는 부하 테스트 대상 API를 선정하고 테스트 계획을 수립합니다.

## 1. 전체 API 현황

현재 서비스는 5개의 핵심 도메인으로 구성되어 있습니다.

### 🔄 큐 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/v1/api/queue/token` | 유저 대기열 토큰 발급 API |
| POST | `/v1/api/queue/token/check` | 유저 대기열 토큰 체크 API |

### 👤 유저 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/v1/api/user/amount` | 유저 요금 충전 API |
| GET | `/v1/api/user/amount` | 유저 요금 조회 API |

### 🎭 콘서트 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| GET | `/v1/api/concerts/schedule` | 예약 가능 콘서트 일정 조회 API |
| GET | `/v1/api/concerts/seat` | 해당 콘서트 일정에 맞는 좌석 조회 API |

### 🎫 예약 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/v1/api/concerts/reserve` | 해당 콘서트 좌석 임시예약 API (5분) |

### 💳 결제 서비스
| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | `/v1/api/concerts/payment` | 결제완료 후 좌석예약 API |

## 2. 부하 테스트 대상 API 선정

### 선정 기준
- 동시성 이슈 발생 가능성
- 데이터베이스 부하 영향도
- 실제 서비스에서의 트래픽 집중도
- SPOF(Single Point of Failure) 가능성

### 1. 대기열 토큰 발급 API (POST /v1/api/queue/token)
- **선정 이유**:
    - 티켓 오픈 시점에 가장 높은 동시 접속 예상
    - 대기열 시스템의 진입점으로 SPOF 가능성 존재
    - 시스템 전반의 안정성에 직접적 영향
- **테스트 포인트**:
    - 최대 동시 접속자 처리 능력
    - 토큰 생성 시 발생하는 부하
    - 시스템 자원 사용량

### 2. 대기열 토큰 체크 API (POST /v1/api/queue/token/check)
- **선정 이유**:
    - 지속적인 폴링으로 인한 서버 부하 발생
    - 대기열 시스템의 핵심 기능
    - 실시간 처리 필요
- **테스트 포인트**:
    - 동시 다발적 폴링 요청 처리 능력
    - 응답 시간의 일관성
    - 서버 리소스 사용량

### 3. 콘서트 일정 조회 API (GET /v1/api/concerts/schedule)
- **선정 이유**:
    - 캐싱 전략의 효율성 검증 필요
    - 데이터 정합성 유지 중요
    - 다수 사용자의 동시 조회 예상
- **테스트 포인트**:
    - 캐시 히트율
    - 데이터베이스 부하
    - 응답 시간

### 4. 좌석 조회 API (GET /v1/api/concerts/seat)
- **선정 이유**:
    - 실시간 좌석 데이터 조회로 인한 DB 부하
    - 데이터 일관성 유지 중요
    - 동시 조회 시 성능 저하 가능성
- **테스트 포인트**:
    - 데이터베이스 연산 처리 능력
    - 동시 조회 시 응답 시간
    - 데이터 정합성

### 5. 임시 예약 API (POST /v1/api/concerts/reserve)
- **선정 이유**:
    - 동시성 제어가 필요한 핵심 로직
    - 트랜잭션 처리 성능 검증 필요
    - 데드락 발생 가능성
- **테스트 포인트**:
    - 동시 예약 처리 능력
    - 트랜잭션 처리 성능
    - 데드락 발생 여부