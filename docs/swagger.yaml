{"openapi":"3.0.1","info":{"title":"콘서트 예약 서비스","description":"항해 플러스 6기 천동민 콘서트 서비스","version":"1.0.0"},"servers":[{"url":"http://127.0.0.1:8080","description":"Generated server url"}],"security":[{"Authorization":[]}],"tags":[{"name":"유저 API","description":"유저와 관련된 API 입니다. 모든 API는 대기열 토큰 헤더(Authorization) 가 필요합니다."},{"name":"콘서트 API","description":"콘서트 예매와 관련된 API 입니다. 모든 API는 대기열 토큰 헤더(Authorization) 가 필요합니다."},{"name":"대기열 API","description":"콘서트 대기열을 발급받는 API 입니다."}],"paths":{"/v1/api/user/amount":{"get":{"tags":["유저 API"],"summary":"유저 요금 조회 API","operationId":"selectUserAmount","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResSelectUserAmountRes"}}}}}},"post":{"tags":["유저 API"],"summary":"유저 요금 충전 API","operationId":"UserAmountCharge","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserAmountChargeReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResUserAmountChargeRes"}}}}}}},"/v1/api/queue/token":{"post":{"tags":["대기열 API"],"summary":"유저 대기열 토큰 발급 API","operationId":"createQueueToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateQueueTokenReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResCreateQueueTokenRes"}}}}}}},"/v1/api/queue/token/check":{"post":{"tags":["대기열 API"],"summary":"유저 대기열 토큰 체크 API","operationId":"getQueueToken","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResSelectQueueTokenRes"}}}}}}},"/v1/api/concerts/reserve":{"post":{"tags":["콘서트 API"],"summary":"해당 콘서트 좌석 임시예약 (5분)","operationId":"reserveConcert","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReserveConcertReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResReserveConcertRes"}}}}}}},"/v1/api/concerts/payment":{"post":{"tags":["콘서트 API"],"summary":"결제 완료 후 임시예약 -> 예약 전환","operationId":"paymentConcert","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentConcertReq"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResPaymentConcertRes"}}}}}}},"/v1/api/concerts/seat":{"get":{"tags":["콘서트 API"],"summary":"해당 콘서트 일정에 맞는 좌석 조회","operationId":"selectSeat","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}},{"name":"scheduleId","in":"query","description":"콘서트 스케쥴 id","required":true,"schema":{"type":"string","description":"콘서트 스케쥴 id","default":"1"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResListSelectSeatRes"}}}}}}},"/v1/api/concerts/schedule":{"get":{"tags":["콘서트 API"],"summary":"예약 가능 콘서트 일정 조회","operationId":"selectConcert","parameters":[{"name":"Authorization","in":"header","description":"대기열 토큰","required":true,"schema":{"type":"string","description":"대기열 토큰","default":"Bearer..."}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CommonResListSelectConcertRes"}}}}}}}},"components":{"schemas":{"UserAmountChargeReq":{"type":"object","properties":{"amount":{"type":"integer","description":"충전금액","format":"int64","default":50000}}},"CommonResUserAmountChargeRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/UserAmountChargeRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"UserAmountChargeRes":{"type":"object","properties":{"amount":{"type":"integer","description":"충전 완료 후 남은 금액","format":"int64","default":50000}},"description":"반환 데이터"},"CreateQueueTokenReq":{"type":"object","properties":{"userId":{"type":"integer","description":"유저 id","format":"int64","default":1}}},"CommonResCreateQueueTokenRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/CreateQueueTokenRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"CreateQueueTokenRes":{"type":"object","properties":{"queueToken":{"type":"string","description":"대기열 토큰","default":"Bearer..."}},"description":"반환 데이터"},"CommonResSelectQueueTokenRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/SelectQueueTokenRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"SelectQueueTokenRes":{"type":"object","properties":{"queuePosition":{"type":"integer","description":"대기열 순서","format":"int64","default":30},"status":{"type":"string","description":"대기열 상태","default":"WAITING","enum":["WAITING","PROGRESS","DONE","EXPIRED"]}},"description":"반환 데이터"},"ReserveConcertReq":{"type":"object","properties":{"scheduleId":{"type":"integer","description":"콘서트 스케쥴 id","format":"int64","default":1},"seatId":{"type":"integer","description":"콘서트 좌석 id","format":"int64","default":1}}},"CommonResReserveConcertRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/ReserveConcertRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"ReserveConcertRes":{"type":"object","properties":{"reservationId":{"type":"integer","description":"콘서트 예약 Id","format":"int64","default":1},"seatStatus":{"type":"string","description":"콘서트 좌석 상태","default":"TEMP_RESERVED","enum":["TEMP_RESERVED","RESERVED","CANCELED"]},"reservedDate":{"type":"string","description":"콘서트 임시 예약 날짜","default":"2024-10-09 20:00:00"},"reservedUntilDate":{"type":"string","description":"콘서트 임시 예약 만료날짜","default":"2024-10-09 20:05:00"}},"description":"반환 데이터"},"PaymentConcertReq":{"type":"object","properties":{"reservationId":{"type":"integer","description":"콘서트 예약 id","format":"int64","default":1}}},"CommonResPaymentConcertRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/PaymentConcertRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"PaymentConcertRes":{"type":"object","properties":{"paymentAmount":{"type":"integer","description":"지불 된 요금","format":"int64","default":50000},"seatStatus":{"type":"string","description":"콘서트 좌석 상태","default":"RESERVED","enum":["TEMP_RESERVED","RESERVED","CANCELED"]},"queueStatus":{"type":"string","description":"예약 대기상태(큐상태)","default":"DONE","enum":["WAITING","PROGRESS","DONE","EXPIRED"]}},"description":"반환 데이터"},"CommonResSelectUserAmountRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"$ref":"#/components/schemas/SelectUserAmountRes"},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"SelectUserAmountRes":{"type":"object","properties":{"amount":{"type":"integer","description":"남은 금액","format":"int64","default":50000}},"description":"반환 데이터"},"CommonResListSelectSeatRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"type":"array","description":"반환 데이터","items":{"$ref":"#/components/schemas/SelectSeatRes"}},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"SelectSeatRes":{"type":"object","properties":{"seatId":{"type":"integer","description":"콘서트 좌석 Id","format":"int64","default":1},"position":{"type":"integer","description":"콘서트 좌석 번호","format":"int32","default":1},"amount":{"type":"integer","description":"콘서트 좌석 가격","format":"int64","default":50000},"seatStatus":{"type":"string","description":"콘서트 좌석 상태","default":"AVAILABLE","enum":["AVAILABLE","TEMP_RESERVED","RESERVED"]}},"description":"반환 데이터"},"CommonResListSelectConcertRes":{"type":"object","properties":{"resultType":{"type":"string","description":"반환 결과","enum":["SUCCESS","FAIL"]},"data":{"type":"array","description":"반환 데이터","items":{"$ref":"#/components/schemas/SelectConcertRes"}},"message":{"type":"string","description":"반환 메시지","default":"SUCCESS or error 메시지"}}},"SelectConcertRes":{"type":"object","properties":{"scheduleId":{"type":"integer","description":"스케쥴ID","format":"int64","default":1},"concertTitle":{"type":"string","description":"콘서트 제목","default":"2024 싸이 흠뻑쇼"},"openDate":{"type":"string","description":"콘서트 개최 날짜","default":"2024-12-01"},"startTime":{"type":"string","description":"콘서트 시작 시간","default":"14:00"},"endTime":{"type":"string","description":"콘서트 종료 시간","default":"22:00"},"seatStatus":{"type":"string","description":"콘서트 예약 가능 여부(좌석 매진 체크)","default":"true","enum":["SOLD_OUT","AVAILABLE"]}},"description":"반환 데이터"}},"securitySchemes":{"Authorization":{"type":"apiKey","description":"대기열 Token을 입력해주세요.","name":"Authorization","in":"header"}}}}